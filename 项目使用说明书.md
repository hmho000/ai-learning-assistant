# AI Learning Assistant 使用说明书

本说明书旨在指导用户如何运行、构建和发布 AI Learning Assistant 项目。本项目是一个集成了 FastAPI 后端和 React 前端的智能学习辅助工具。

---

## 1. 快速启动 (源码运行模式)

如果您是开发者或希望直接从源代码运行项目，请按照以下步骤操作。

### 前置条件
确保您的电脑已安装以下环境：
- **Python 3.8+** (建议勾选 "Add Python to PATH")
- **Node.js 16+** (包含 npm)

### 启动步骤

1. **安装依赖**
   首次运行前，请确保已安装后端依赖：
   ```powershell
   pip install -r requirements.txt
   ```
   *注意：前端依赖通常会在构建过程中自动安装，或者您可以手动进入 `frontend` 目录执行 `npm install`。*

2. **启动应用**
   在项目根目录下，直接运行启动脚本：
   ```powershell
   python run_app.py
   ```

3. **访问应用**
   脚本会自动启动后端服务（默认端口 8000）并尝试打开默认浏览器访问 `http://127.0.0.1:8000`。
   如果浏览器未自动打开，请手动访问上述地址。

---

## 2. 项目构建 (Build)

本项目提供了一键构建脚本 `build_exe.bat`，用于将 Python 后端和 React 前端打包成一个独立的 Windows 可执行文件 (.exe)。

### 构建脚本说明
`build_exe.bat` 脚本会自动执行以下流程：
1. **环境检查**：检查 Python, pip, npm 是否可用。
2. **安装依赖**：自动安装 `requirements.txt` 中的 Python 依赖。
3. **构建前端**：进入 `frontend` 目录，执行 `npm install` 和 `npm run build`，生成静态资源。
4. **打包后端**：使用 PyInstaller 将 `run_app.py` 打包为 `run_app.exe`。
5. **资源整合**：将前端构建产物 (`frontend/dist`) 和配置文件 (`.env`) 复制到输出目录 (`dist`)。

### 如何构建
双击项目根目录下的 `build_exe.bat` 文件，或者在命令行中运行：
```powershell
.\build_exe.bat
```
等待脚本执行完毕，看到 "打包完成！" 提示即可。

---

## 3. 运行发布版本 (Dist)

构建完成后，所有的发布文件都会生成在 `dist` 目录下。您可以将该目录分发给最终用户，无需安装 Python 或 Node.js 环境即可运行。

### 目录结构
`dist` 目录包含以下关键文件：
- `run_app.exe`: 主程序入口。
- `frontend/`: 前端静态资源文件夹（**必须存在**，否则页面无法加载）。
- `.env`: 配置文件（包含 API Key 等设置）。
- `_internal/`: (如果是文件夹模式打包) PyInstaller 生成的依赖库文件夹。

### 启动方法
1. 进入 `dist` 目录。
2. 双击运行 `run_app.exe`。
3. 程序将启动一个黑色控制台窗口（显示后端日志），随后自动打开浏览器进入系统。
4. **注意**：在使用过程中请勿关闭黑色的控制台窗口，否则服务将停止。

### 常见问题
- **浏览器未打开**：请手动访问控制台中显示的地址（通常是 `http://127.0.0.1:8000`）。
- **页面空白**：请检查 `dist` 目录下是否存在 `frontend` 文件夹且内容不为空。
- **端口冲突**：如果提示端口 8000 被占用，请关闭占用端口的程序或修改 `.env` 中的配置（如果支持）。

---

## 4. 开发者命令速查

| 操作 | 命令 | 说明 |
|------|------|------|
| 启动全栈应用 | `python run_app.py` | 开发调试首选 |
| 一键打包 | `.\build_exe.bat` | 生成发布包 |
| 仅前端开发 | `cd frontend && npm run dev` | 前端独立调试 (端口 5173) |
| 仅后端开发 | `uvicorn backend.app:app --reload` | 后端独立调试 |
